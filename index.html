<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Brain Rot Detector</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/particles.js/2.0.0/particles.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
  font-family: 'Poppins', sans-serif;
  background: linear-gradient(135deg, #000000 0%, #2a75a7 100%);
  min-height: 100vh;
  color: #fff;
  overflow-x: hidden;
  position: relative;
}

/* Particles Background */
#particles-js { position: fixed; width: 100%; height: 100%; top: 0; left: 0; z-index: -1; }

/* Landing Page - Extended for Scroll */
.landing {
  min-height: 200vh; /* Extended for scrolling through blogs */
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  padding: 20px 5% 0;
  position: relative;
  overflow: hidden;
}
.hero-section {
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  max-width: 1200px;
  margin-bottom: 20px;
  padding: 0 20px;
  text-align: center;
}
.hero-content {
  max-width: 800px;
  z-index: 2;
  animation: slideInLeft 1s ease-out;
}
@keyframes slideInLeft { from { opacity: 0; transform: translateX(-50px); } to { opacity: 1; transform: translateX(0); } }
.landing h1 { font-size: 3.5em; font-weight: 700; margin-bottom: 20px; animation: pulse 2s infinite; line-height: 1.2; }
@keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.02); } }
.landing .subheading { font-size: 1.2em; margin-bottom: 40px; opacity: 0.9; line-height: 1.6; max-width: 600px; text-align: center; }
.blog-sections {
  width: 100%;
  max-width: 800px;
  margin: 0 auto;
  padding: 0 20px;
}
.blog-section {
  margin: 40px 0;
  padding: 40px;
  background: rgba(255,255,255,0.1);
  border-radius: 25px;
  box-shadow: 0 20px 45px rgba(0,0,0,0.15);
  backdrop-filter: blur(15px);
  animation: fadeInUp 1s ease-out;
  border: 1px solid rgba(255,255,255,0.25);
  opacity: 0;
  transform: translateY(50px);
  transition: all 0.8s ease-out;
}
.blog-section.visible { opacity: 1; transform: translateY(0); }
@keyframes fadeInUp { from { opacity: 0; transform: translateY(50px); } to { opacity: 1; transform: translateY(0); } }
.blog-section h2 { font-family: 'Playfair Display', serif; font-size: 2em; margin-bottom: 20px; color: #fff; }
.blog-section p { line-height: 1.8; color: rgba(255,255,255,0.9); font-size: 1.1em; }
.stats { display: flex; justify-content: center; align-items: center; gap: 20px; margin: 20px 0; width: 100%; max-width: 600px; text-align: center; }
.stat { text-align: center; flex: 1; }
.stat-num { font-size: 2.5em; font-weight: 700; color: #fff; display: block; }
.stat-label { font-size: 1em; opacity: 0.8; }
.cta-section { text-align: center; padding: 60px 0; background: rgba(0,0,0,0.2); width: 100%; }
.cta-section h2 { font-size: 2.5em; margin-bottom: 20px; }
.start-btn { background: linear-gradient(45deg, #15409ed5, #4ecdc4); border: none; padding: 18px 40px; border-radius: 50px; color: white; font-size: 20px; cursor: pointer; transition: transform 0.3s, box-shadow 0.3s; font-weight: 600; animation: bounce 2s infinite; box-shadow: 0 10px 30px rgba(255,107,107,0.3); display: block; margin: 0 auto; position: static; transform: none; }
.start-btn:hover { transform: translateY(-5px); box-shadow: 0 15px 40px rgba(255,107,107,0.4); }
@keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-3px); } }

/* Login Modal */
.login-modal {
  position: fixed;
  top: 0;
  right: -100%;
  width: 100%;
  height: 100vh;
  background: rgba(0,0,0,0.8);
  transition: right 1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: flex-end;
  padding: 40px;
}
.login-modal.active { right: 0; }

/* container */
.login-container {
  max-width: 450px;
  width: 100%;
  background: rgba(255,255,255,0.95);
  border-radius: 25px;
  padding: 50px;
  text-align: center;
  box-shadow: 0 25px 50px rgba(0,0,0,0.2);
  animation: slideInRight 0.5s ease-out;
  position: relative;
}
@keyframes slideInRight { from { opacity: 0; transform: translateX(50px); } to { opacity: 1; transform: translateX(0); } }

/* Close button (compact, white circle inside the card) */
.close-btn {
  position: absolute;
  top: 12px;
  right: 12px;
  width: 10px;
  height: 10px;
  background: #ffffff; /* solid white background */
  border: none;
  font-size: 20px;
  font-weight: 600;
  color: #333;
  cursor: pointer;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
  transition: all 0.25s ease;
  z-index: 5; /* stays above inputs */
}
.close-btn:hover {
  background: #ffffff;
  color: #000000;
  transform: scale(1.05);
}

/* keep inputs full width inside modal */
.login-container h1 { font-size: 2.5em; color: #1e3c72; margin-bottom: 20px; }
.login-container input, .login-container select {
  width: 100%;
  padding: 18px;
  margin: 15px 0;
  border: 2px solid #706f6f;
  border-radius: 12px;
  font-size: 16px;
  transition: all 0.3s;
  background: #f8fafc;
}
.login-container input:focus, .login-container select:focus { outline: none; border-color: #4ecdc4; box-shadow: 0 0 0 3px rgba(78,205,196,0.1); }

/* Old modal-wide button style renamed so we don't force full width on the login-submit */
.login-container .modal-full {
  width: 100%;
  background: linear-gradient(45deg, #15409ed5, #4ecdc4);
  border: none;
  padding: 18px;
  border-radius: 12px;
  color: white;
  font-size: 18px;
  cursor: pointer;
  transition: all 0.3s;
  font-weight: 600;
  margin-top: 10px;
}
.login-container .modal-full:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(255,107,107,0.3); }

/* New: action wrapper to push the login button to the right */
.login-actions {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  margin-top: 10px;
}

/* the small, right-aligned login button with white background */
.login-submit {
  width: 100%;
  padding: 12px 20px;
  background: linear-gradient(45deg, #15409ed5, #4ecdc4);
  color: #fff;
  border-radius: 12px;
  border: 2px solid #4ecdc4;
  font-size: 16px;
  font-weight: 700;
  cursor: pointer;
  transition: transform 0.18s ease, box-shadow 0.18s ease;
  box-shadow: 0 6px 14px rgba(0,0,0,0.08);
}
.login-submit:hover {
  background: linear-gradient(45deg, #15409ed5, #4ecdc4);
  color: #fff;
  transform: translateY(-3px);
  box-shadow: 0 12px 30px rgba(0,0,0,0.12);
}

/* Sections */
.section { display: none; min-height: 100vh; padding: 80px 5%; text-align: center; background: linear-gradient(135deg, #000000 0%, #2a75a7 100%); }
.section.active { display: block; animation: fadeIn 0.8s ease-in; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
.section h1 { font-size: 3em; color: #fff; margin-bottom: 30px; }
.section h2 { color: #fff; margin-bottom: 20px; font-size: 2em; }

/* Quiz Styles - Enhanced Clickability & Height */
.question { margin: 30px 0; padding: 40px; background: rgba(255,255,255,0.1); border-radius: 20px; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2); min-height: 200px; }
#questionText { font-size: 1.8em; font-weight: 500; line-height: 1.4; color: #fff; margin-bottom: 20px; }
.option {
  display: block;
  padding: 20px;
  margin: 10px 0;
  background: rgba(255,255,255,0.9);
  border: 2px solid #e2e8f0;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.3s;
  text-align: left;
  color: #333;
  position: relative;
  user-select: none;
  min-height: 60px;
  display: flex;
  align-items: center;
}
.option:hover { border-color: #4ecdc4; background: #fff; transform: translateX(5px); }
.option input:checked + label { background: linear-gradient(45deg, #15409ed5, #4ecdc4); color: white; border-color: #ff6b6b; border-radius: 12px; }
.option input { display: none; }
.option label {
  display: block;
  cursor: pointer;
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  margin: 0;
  padding: inherit;
}
/* Ensure full div clickable */
.option { pointer-events: none; }
.option label { pointer-events: all; }

/* Default global button style (keeps landing CTA look) */
button { background: linear-gradient(45deg, #15409ed5, #4ecdc4); border: none; padding: 15px 30px; border-radius: 50px; color: white; font-size: 18px; cursor: pointer; transition: transform 0.3s, box-shadow 0.3s; margin: 10px; font-weight: 500; }
button:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(255,107,107,0.3); }

#results { animation: glow 3s ease-in-out infinite alternate; background: linear-gradient(135deg, #000000 0%, #2a75a7 100%); }
@keyframes glow { from { box-shadow: 0 0 20px rgba(78, 205, 196, 0.3); } to { box-shadow: 0 0 40px rgba(255, 107, 107, 0.5); } }
canvas { max-width: 350px; margin: 20px auto; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
#aiOverview {
  background: linear-gradient(135deg, rgba(255,236,210,0.9) 0%, rgba(252,182,159,0.9) 100%);
  padding: 25px;
  border-radius: 20px;
  margin: 25px 0;
  font-weight: 400;
  color: #333;
  box-shadow: 0 10px 30px rgba(0,0,0,0.1);
  text-align: left;
}
#aiOverview h3 { margin-bottom: 15px; color: #333; font-size: 1.4em; font-weight: 600; }
.share-btn { background: linear-gradient(45deg, #15409ed5, #4ecdc4);border-color: #fff; margin-top: 20px; width: 50%; padding: 15px; }
.cure-list { list-style: none; max-width: 500px; margin: 0 auto; }
.cure-list li { margin: 15px 0; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 15px; text-align: left; border: 1px solid rgba(255,255,255,0.2); }
.cure-list a { color: #4ecdc4; text-decoration: none; font-weight: 600; }
.progress-bar { width: 100%; height: 12px; background: rgba(255,255,255,0.2); border-radius: 6px; overflow: hidden; margin: 25px 0; box-shadow: inset 0 2px 4px rgba(0,0,0,0.1); }
.progress-fill { height: 100%; background: linear-gradient(45deg, #15409ed5, #4ecdc4); transition: width 1.5s ease; border-radius: 6px; box-shadow: 0 0 10px rgba(255,107,107,0.5); }
#nextBtn, #submitBtn { margin: 25px 0; width: 200px; }

/* Footer */
footer { background: rgba(0,0,0,0.3); padding: 20px; text-align: center; color: #ccc; font-size: 14px; }

/* Responsive */
@media (max-width: 768px) {
  .hero-section { flex-direction: column; text-align: center; }
  .hero-content { max-width: 100%; margin-bottom: 50px; }
  .stats { flex-direction: column; gap: 10px; }
  .start-btn { position: static; transform: none; margin: 20px auto; display: block; }
  .blog-section { padding: 20px; margin: 40px 0; }
  /* For small screens: make login button full width so it's easier to tap */
  .login-actions { justify-content: center; }
  .login-submit { width: 100%; max-width: 320px; }
}
</style>
</head>
<body>
<div id="particles-js"></div>

<!-- Landing Page -->
<div id="landing" class="landing">
  <div class="hero-section">
    <div class="hero-content">
      <h1>Unlock Your Mind's Potential</h1>
      <p class="subheading">Find out how too much scrolling hurts your brain with our Brain Rot Detector. Get special tips, plans just for you, and ways to focus better.</p>
      <button class="start-btn" onclick="openLogin()">Start Testing </button>
      <div class="stats">
        <div class="stat">
          <span class="stat-num" data-target="95">95</span>
          <span class="stat-label">Helps Detox Brain</span>
        </div>
        <div class="stat">
          <span class="stat-num" data-target="96">10K+</span>
          <span class="stat-label">Accuracy</span>
        </div>
        <div class="stat">
          <span class="stat-num" data-target="7.9">4.9</span>
          <span class="stat-label">Average Rating</span>
        </div>
      </div>
    </div>
  </div>

  <div class="blog-sections">
    <div class="blog-section" data-scroll="1">
      <h2>üß† What is Brain Rot?</h2>
      <p>It's the brain fog you get from watching too many short videos. Users learn how it changes your brain to get distracted easily. As you keep scrolling, apps keep you watching more short stuff that makes it hard to pay attention to real things.</p>
    </div>
    <div class="blog-section" data-scroll="2">
      <h2>‚ö†Ô∏è The Harms</h2>
      <p>From short attention spans to more worry‚Äîour info shows the numbers. (Tip: 70% of young people feel it every day.) It starts small: forgetting things, bad sleep, and thinking fun is just one more scroll away. But knowing helps‚Äîkeep reading to see more.</p>
    </div>
    <div class="blog-section" data-scroll="3">
      <h2>üî¨ How Does It Happen?</h2>
      <p>Every click gives a little dopamine hit, like training your brain to want the next one. Apps are made to keep you hooked, not to help you learn. Over time, focusing hard gets tough, and your thoughts get all over the place. But knowing is step one‚Äîkeep going for the facts.</p>
    </div>
    <div class="blog-section" data-scroll="4">
      <h2>How To Cure Brain Rot</h2>
      <p>Limit Screen Time: Set clear boundaries for daily device usage and stick to them. Consider using apps or phone settings to track and manage your time online.
      <br><br>Curate Content Mindfully: Be intentional about what you consume. Unfollow accounts that cause negative feelings and focus on meaningful, educational, or uplifting content.
      <br><br>Practice Mindfulness: Engage in practices like meditation or deep breathing to retrain your brain to focus and break the habit of mindless scrolling.</p>
    </div>
  </div>

  <div class="cta-section">
    <h2>Ready to Get Better?</h2>
    <button class="start-btn" onclick="openLogin()">Start Testing</button>
  </div>
</div>

<!-- Login Modal -->
<div id="loginModal" class="login-modal">
  <div class="login-container">
    <button class="close-btn" onclick="closeLogin()">&times;</button>

    <h1>üß† LOGIN </h1>
    <p>Enter your details for a tailored experience:</p>

    <input type="text" id="name" placeholder="Full Name" required>
    <input type="number" id="age" placeholder="Age " min="1" max="100" required>

    <!-- login-actions wrapper: right aligned on desktop, full-width on mobile -->
    <div class="login-actions">
      <button class="login-submit" onclick="startQuiz()">Start Testing</button>
    </div>

    <p style="font-size: 12px; color: #666; margin-top: 15px;">Secure & Private ‚Äì No spam</p>
  </div>
</div>

<!-- Quiz Section -->
<div id="quiz" class="section">
  <h2>Brain Rot Detector</h2>
  <p></p>
  <div id="questionContainer">
    <p id="questionText"></p>
    <div id="options"></div>
  </div>
  <button id="nextBtn" onclick="nextQuestion()">Next ‚Üí</button>
  <button id="submitBtn" style="display:none;" onclick="submitQuiz()">See Result</button>
  <p id="progressText">Question <span id="currentQNum">1</span> of 10</p>
</div>

<!-- Results Section -->
<div id="results" class="section">
  <h2 id="level"></h2>
  <div class="progress-bar"><div id="progressFill" class="progress-fill" style="width: 0%;"></div></div>
  <p id="tip"></p>
  <h3>Your Brain Rot Results</h3>
  <canvas id="pieChart"></canvas>
  <div id="aiOverview">
    <h3>AI Overview</h3>
    <p id="aiSummary">Crafting your bespoke recovery blueprint...</p>
  </div>
  <h3>Curated Makeover Protocol</h3>
  <ul id="makeoverTips" style="text-align: left; max-width: 500px; margin: auto;"></ul>
  <h3>Exclusive Detox Portals</h3>
  <ul class="cure-list">
    <li><a href="https://neave.tv/" target="_blank">Neave.tv</a> - Premium trippy escapes for instant zen.</li>
    <li><a href="https://theuselessweb.com/" target="_blank">The Useless Web</a> - Curated absurdities to break the scroll cycle.</li>
    <li><a href="http://pointerpointer.com/" target="_blank">Pointer Pointer</a> - Whimsical cursor worship for a laugh.</li>
    <li><a href="https://www.thispersondoesnotexist.com/" target="_blank">This Person Does Not Exist</a> - AI-generated faces to ignite real curiosity.</li>
    <li><a href="https://eustatic.com/" target="_blank">Eustatic</a> - Serene soundscapes for premium unwind.</li>
  </ul>
  <button class="share-btn" onclick="shareResult()">üì± Share Result</button>
  <button onclick="restart()">Start New Scan</button>
</div>

<footer>
  <p>&copy; 2025 Brain Rot Detector. Built By Vidith , Rudraksh, Daksh , Bhavya & Gaurang</p>
</footer>

<script>
// Particles.js Init
particlesJS('particles-js', {
  particles: {
    number: { value: 80, density: { enable: true, value_area: 800 } },
    color: { value: ['#ff6b6b', '#4ecdc4', '#667eea'] },
    shape: { type: 'circle' },
    opacity: { value: 0.5, random: true },
    size: { value: 3, random: true },
    line_linked: { enable: true, distance: 150, color: '#fff', opacity: 0.4, width: 1 },
    move: { enable: true, speed: 2, direction: 'none', random: false, straight: false, out_mode: 'out', bounce: false }
  },
  interactivity: {
    detect_on: 'canvas',
    events: { onhover: { enable: true, mode: 'repulse' }, onclick: { enable: true, mode: 'push' }, resize: true },
    modes: { repulse: { distance: 100, duration: 0.4 }, push: { particles_nb: 4 } }
  },
  retina_detect: true
});

// Scroll Reveal for Blog Sections
function revealOnScroll() {
  const sections = document.querySelectorAll('.blog-section');
  sections.forEach(section => {
    const rect = section.getBoundingClientRect();
    if (rect.top < window.innerHeight && rect.bottom > 0) {
      section.classList.add('visible');
    }
  });
}
window.addEventListener('scroll', revealOnScroll);
revealOnScroll(); // Initial check

// Animated Stats
function animateStats() {
  const stats = document.querySelectorAll('.stat-num');
  stats.forEach(stat => {
    const target = parseInt(stat.getAttribute('data-target'));
    let count = 0;
    const increment = target / 100;
    const timer = setInterval(() => {
      count += increment;
      stat.textContent = Math.floor(count) + (target > 100 ? '%' : target > 10 ? '' : '.0');
      if (count >= target) {
        stat.textContent = target + (target > 100 ? '%' : target > 10 ? '' : '.0');
        clearInterval(timer);
      }
    }, 20);
  });
}
window.addEventListener('load', animateStats);

// OpenAI API Key (kept as-is from your file)
const OPENAI_API_KEY = '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';

// User Data (Added email)
let user = { name: '', age: 0 };
let totalScore = 0;
const categoryScores = { social: 0, focus: 0, content: 0, memory: 0, habits: 0 };

// Questions (unchanged)
const questions = [
  { q: "Daily social media hours?", opts: ["None (0)", "<1 (7)", "1-3 (14)", ">3 (21)"], id: 'social' },
  { q: "Can you focus on a 10-min task without distractions?", opts: ["Always (0)", "Usually (7)", "Sometimes (14)", "Rarely (21)"], id: 'focus' },
  { q: "Preferred content length?", opts: ["Long-form (0)", "Mix (7)", "Short clips (14)", "15-sec only (21)"], id: 'content' },
  { q: "How often do you forget what you just scrolled?", opts: ["Never (0)", "Rarely (7)", "Often (14)", "Every time (21)"], id: 'memory' },
  { q: "Weekend energy: Productive or endless scroll?", opts: ["Productive (0)", "Balanced (7)", "Mostly scroll (14)", "All scroll (21)"], id: 'habits' },
  { q: "Social media as first/last thing of the day?", opts: ["Never (0)", "Rarely (7)", "Often (14)", "Always (21)"], id: 'habits' },
  { q: "Feel anxious without your phone nearby?", opts: ["No way (0)", "Sometimes (7)", "Often (14)", "Yes, big time (21)"], id: 'focus' },
  { q: "Notifications per hour on average?", opts: ["<5 (0)", "5-10 (7)", "10-20 (14)", ">20 (21)"], id: 'social' },
  { q: "Preference: Deep convos or quick chats?", opts: ["Deep talks (0)", "Mix (7)", "Quick chats (14)", "Quick only (21)"], id: 'content' },
  { q: "Weekly screen time outside school/work?", opts: ["<5hrs (0)", "5-10hrs (7)", "10-20hrs (14)", ">20hrs (21)"], id: 'social' }
];
let currentQ = 0;
let answers = new Array(questions.length).fill(null);
const makeoverTips = {
  low: ["Dive into a premium audiobook chapter today.", "Schedule a device-free nature immersion.", "Curate a gratitude ritual with journaling."],
  mid: ["Implement elite scroll boundaries with timers.", "Elevate one session to skill-building content.", "Foster authentic connections beyond screens."],
  high: ["Initiate a 24-hour digital sabbath.", "Incorporate mindfulness mastery sessions.", "Architect an adventure blueprint for the week."]
};

// Open Login Modal
function openLogin() {
  document.getElementById('loginModal').classList.add('active');
}
// Close Login
function closeLogin() {
  document.getElementById('loginModal').classList.remove('active');
}
// Start Quiz
function startQuiz() {
  user.name = document.getElementById('name').value.trim();
  user.age = parseInt(document.getElementById('age').value);
  if (!user.name || !user.age) return alert('Please complete all fields for premium access!');
  closeLogin();
  document.getElementById('landing').style.display = 'none';
  renderQuiz();
}
// Render Quiz
function renderQuiz() {
  currentQ = 0;
  answers = new Array(questions.length).fill(null);
  document.getElementById('quiz').classList.add('active');
  showQuestion(0);
}
// Show Question
function showQuestion(idx) {
  currentQ = idx;
  document.getElementById('questionText').textContent = `Q${idx + 1}: ${questions[idx].q}`;
  document.getElementById('currentQNum').textContent = idx + 1;
  const optsDiv = document.getElementById('options');
  optsDiv.innerHTML = '';
  questions[idx].opts.forEach((opt, oidx) => {
    const optDiv = document.createElement('div');
    optDiv.className = 'option';
    const points = opt.match(/\((\d+)\)/)[1];
    const cat = questions[idx].id;
    optDiv.innerHTML = `<input type="radio" id="q${idx}_o${oidx}" name="q${idx}" value="${points}|${cat}">
                                   <label for="q${idx}_o${oidx}">${opt}</label>`;
    optsDiv.appendChild(optDiv);
  });
  if (answers[idx]) {
    const radios = document.querySelectorAll(`input[name="q${idx}"]`);
    radios.forEach(radio => {
      if (radio.value === answers[idx]) radio.checked = true;
    });
  }
  document.getElementById('nextBtn').style.display = 'block';
  document.getElementById('submitBtn').style.display = (idx === questions.length - 1) ? 'block' : 'none';
  if (idx === questions.length - 1) document.getElementById('nextBtn').style.display = 'none';
}
// Next Question
function nextQuestion() {
  const selected = document.querySelector(`input[name="q${currentQ}"]:checked`);
  if (!selected) return alert('Select an option to proceed.');
  answers[currentQ] = selected.value;
  showQuestion(currentQ + 1);
}
// Submit Quiz
function submitQuiz() {
  const lastSelected = document.querySelector(`input[name="q${currentQ}"]:checked`);
  if (!lastSelected) return alert('Complete the final question.');
  answers[currentQ] = lastSelected.value;
  totalScore = 0;
  Object.keys(categoryScores).forEach(key => categoryScores[key] = 0);
  answers.forEach(ans => {
    if (ans) {
      const [pts, cat] = ans.split('|');
      const pointVal = parseInt(pts);
      totalScore += pointVal;
      if (categoryScores[cat] !== undefined) categoryScores[cat] += pointVal;
    }
  });
  const scaledScore = Math.round((totalScore / 210) * 100);
  let level, tip, tipSet;
  if (scaledScore <= 25) {
    level = `üü¢ Excellent Score ${user.name}!`;
    tip = "";
    tipSet = 'low';
  } else if (scaledScore <= 50) {
    level = `üü° Good Score ${user.name}`;
    tip = "";
    tipSet = 'mid';
  } else if (scaledScore <= 75) {
    level = `üü† Optimization Needed, ${user.name}`;
    tip = "";
    tipSet = 'high';
  } else {
    level = `üî¥ Critical Situation ,${user.name}!`;
    tip = "";
    tipSet = 'high';
  }
  document.getElementById('level').textContent = level + ` (${scaledScore}/100)`;
  document.getElementById('tip').textContent = tip;
  document.getElementById('progressFill').style.width = `${scaledScore}%`;
  const tipsUl = document.getElementById('makeoverTips');
  tipsUl.innerHTML = makeoverTips[tipSet].map(tip => `<li>‚Ä¢ ${tip}</li>`).join('');
  const ctx = document.getElementById('pieChart').getContext('2d');
  new Chart(ctx, {
    type: 'pie',
    data: {
      labels: ['Social Scroll', 'Focus Fade', 'Content Crave', 'Memory Melt', 'Habit Haze'],
      datasets: [{ data: [categoryScores.social, categoryScores.focus, categoryScores.content, categoryScores.memory, categoryScores.habits], backgroundColor: ['#ff6384', '#36a2eb', '#ffce56', '#4bc0c0', '#9966ff'] }]
    },
    options: { responsive: true, plugins: { legend: { position: 'bottom', labels: { color: '#fff' } } } }
  });
  generateAIOverview(scaledScore);
  document.getElementById('quiz').classList.remove('active');
  document.getElementById('results').classList.add('active');
}
// AI Overview
// Fake AI Overview (no backend, dynamic text + typing animation)
async function generateAIOverview(score) {
  const aiSummary = document.getElementById("aiSummary");
  aiSummary.innerHTML = " <em>Analyzing neural activity and decoding focus levels...</em>";

  // Simulated AI delay for realism
  await new Promise(r => setTimeout(r, 1000));

  const highCats = Object.entries(categoryScores)
    .filter(([_, s]) => s > 20)
    .map(([c]) => c)
    .join(", ") || "balanced mind";

  // Dynamic AI-style templates
  const templates = [
    ` Neural recalibration required, ${user.name}. Your ${score}% focus integrity suggests mild dopamine desync caused by digital overstimulation. Recommended reboot protocol:
1Ô∏è‚É£ 10-min deep-focus ritual every morning.  
2Ô∏è‚É£ Sunset screen-off mode daily.  
3Ô∏è‚É£ Consume long-form creativity fuel ‚Äî books, podcasts, deep work.  
4Ô∏è‚É£ Weekly social detox: 1 offline day.  
‚ö° *"Discipline is remembering what you want most."* ‚Äî David Campbell`,

    ` ${user.name}, your current brain-rot index of ${score}% indicates overstimulated dopamine receptors with ${highCats} imbalance. Begin cognitive restoration:
üßò Practice mindful breathing before each scroll.  
üß© Engage in tactile hobbies ‚Äî sketching, journaling, music.  
üåÖ Replace 20 mins of screen time with a real-world walk.  
üß† Log weekly reflection scores.  
Quote of the cycle: *"The quieter you become, the more you hear."* ‚Äî Ram Dass`,

    ` Cognitive calibration analysis complete. ${user.name}, your ${score}% rot ratio reveals resilience but hidden attention drift. Focus upgrade plan:
üåø 7-min meditation on waking.  
üìµ Two-hour digital fast post-sunset.  
üìö Absorb content >5 mins long daily.  
üéØ Reward progress, not scrolling.  
üí¨ ‚ÄúYour brain is a muscle ‚Äî feed it thoughts, not dopamine loops.‚Äù`,

    ` ${user.name}, AI synthesis shows ${score}% mental desync from sustained micro-dopamine inputs (${highCats}). Deploy Focus Recovery Framework:
1. Isolate your prime work hour, protect it fiercely.  
2. Reclaim night by journaling offline.  
3. Reward deep tasks, ignore micro-scroll urges.  
4. Refresh through analog joy ‚Äî music, friends, silence.  
ü™Ñ ‚ÄúClarity isn‚Äôt found in speed; it‚Äôs built in stillness.‚Äù`
  ];

  // Pick a random ‚ÄúAI suggestion‚Äù
  const text = templates[Math.floor(Math.random() * templates.length)];

  // Typing animation to make it feel AI-generated
  aiSummary.innerHTML = "";
  let i = 0;
  const speed = 25;
  function typeWriter() {
    if (i < text.length) {
      aiSummary.innerHTML += text.charAt(i);
      i++;
      setTimeout(typeWriter, speed);
    }
  }
  typeWriter();
}

// Share Result
function shareResult() {
  const shareText = `üß† Brain Rot Scan Result: ${document.getElementById('level').textContent}! Age:${user.age}. `;
  if (navigator.share) {
    navigator.share({ title: 'Premium Brain Rot Results', text: shareText });
  } else {
    navigator.clipboard.writeText(shareText).then(() => alert('Premium share copied! Broadcast your breakthrough.'));
  }
}
// Restart
</script>
</body>
</html>
